<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>org.eclipse.neoscada</groupId>
		<artifactId>org.eclipse.neoscada.deploy.common</artifactId>
		<version>0.5.0-SNAPSHOT</version>
		<relativePath>../</relativePath>
	</parent>

	<artifactId>org.eclipse.neoscada.deploy.common-suse</artifactId>
	<packaging>pom</packaging>

	<properties>
	</properties>

	<build>
		<plugins>
			<plugin>
				<groupId>de.dentrassi.maven</groupId>
				<artifactId>rpm</artifactId>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>rpm</goal>
						</goals>
						<configuration>
							<packageName>neoscada.common.suse</packageName>
							<outputFileName>neoscada.common.suse-${release.fullVersion}-${buildTimestamp}-noarch.rpm</outputFileName>
							<forceRelease>true</forceRelease>
							<release>${buildTimestamp}</release>
							<version>${release.fullVersion}</version>
							<attach>true</attach>
							<skipSigning>true</skipSigning>
							<group>Application/Misc</group>

							<prerequisites>
								<prerequisite>jre ge 1.8.0</prerequisite>
								<prerequisite>python2</prerequisite>
								<prerequisite>perl</prerequisite>
								<prerequisite>shadow</prerequisite>
								<prerequisite>rsync</prerequisite>
								<prerequisite>glibc</prerequisite>
								<prerequisite>which</prerequisite>
							</prerequisites>

							<provides>
								<provide>neoscada.common</provide>
								<provide>neoscada.common.suse</provide>
							</provides>

							<rulesets>
								<ruleset>
									<id>default-rule</id>
									<rules>
										<rule>
											<when>
												<type>directory</type>
											</when>
											<mode>0755</mode>
										</rule>
										<rule>
											<when>
												<type>file</type>
											</when>
											<mode>0644</mode>
										</rule>
									</rules>
								</ruleset>
								<ruleset>
									<id>executable-rule</id>
									<rules>
										<rule>
											<when>
												<type>directory</type>
											</when>
											<mode>0755</mode>
										</rule>
										<rule>
											<when>
												<type>file</type>
											</when>
											<mode>0755</mode>
										</rule>
									</rules>
								</ruleset>
							</rulesets>
							<entries>
								<!-- create directories -->
								<entry>
									<name>/etc/neoscada</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/etc/neoscada/schema</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/etc/neoscada/jarcfg</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/usr/jar</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/usr/share/neoscada</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/usr/share/neoscada/profiles</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/usr/share/neoscada/p2</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/usr/share/neoscada/sql</name>
									<mode>0755</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/var/log/neoscada</name>
									<user>root</user>
									<group>neoscada</group>
									<mode>0775</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/usr/lib/perl5/site_perl/EclipseSCADA</name>
									<user>root</user>
									<group>neoscada</group>
									<mode>0775</mode>
									<directory>true</directory>
								</entry>
								<entry>
									<name>/var/run/neoscada</name>
									<user>root</user>
									<group>neoscada</group>
									<mode>0775</mode>
									<directory>true</directory>
								</entry>

								<!-- collect files -->
								<entry>
									<name>/usr/bin</name>
									<collect>
										<from>../src/bin</from>
									</collect>
									<ruleset>executable-rule</ruleset>
								</entry>
								<entry>
									<name>/usr/share/neoscada/sql</name>
									<collect>
										<from>../src/share/sql</from>
									</collect>
									<ruleset>default-rule</ruleset>
									<directory>false</directory>
								</entry>
								<entry>
									<name>/usr/lib/perl5/site_perl/EclipseSCADA</name>
									<collect>
										<from>../src/perl/EclipseSCADA</from>
									</collect>
									<ruleset>default-rule</ruleset>
									<directory>false</directory>
								</entry>
								<entry>
									<name>/etc/profile.d/neoscada.sh</name>
									<file>../src/default/neoscada.sh</file>
									<ruleset>executable-rule</ruleset>
									<configuration>true</configuration>
								</entry>
								<entry>
									<name>/etc/default/neoscada</name>
									<file>../src/default/neoscada</file>
									<ruleset>default-rule</ruleset>
									<configuration>true</configuration>
								</entry>
							</entries>
							<beforeInstallation>
								<file>../src/rpm/beforeInstallation</file>
							</beforeInstallation>
							<afterRemoval>
								<file>../src/rpm/afterRemoval</file>
							</afterRemoval>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>

</project>